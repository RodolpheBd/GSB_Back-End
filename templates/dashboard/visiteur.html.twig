{% extends 'base.html.twig' %}

{% block title %}Tableau de bord Visiteur
{% endblock %}

{% block body %}
	<div class="header">Suivi de vos Frais</div>

	<div>
		<!-- Card pour Cafés -->
		<div class="card">
			<img src="/assets/images/coffee.png" class="card-img" alt="Frais Café">
			<div class="card-body">
				<div class="card-title">Cafés</div>
				<a href="{{ path('visiteur_cafes') }}" class="btn btn-primary">Voir les frais</a>
			</div>
		</div>

		<!-- Card pour Hébergements -->
		<div class="card">
			<img src="/assets/images/hotel.png" class="card-img" alt="Frais Hébergement">
			<div class="card-body">
				<div class="card-title">Hébergement</div>
				<a href="{{ path('visiteur_hebergements') }}" class="btn btn-primary">Voir les frais</a>
			</div>
		</div>

		<!-- Card pour Déplacements -->
		<div class="card">
			<img src="/assets/images/car.png" class="card-img" alt="Frais Déplacement">
			<div class="card-body">
				<div class="card-title">Déplacements</div>
				<a href="{{ path('visiteur_deplacements') }}" class="btn btn-primary">Voir les frais</a>
			</div>
		</div>

		<!-- Card pour Restaurations -->
		<div class="card">
			<img src="assets/images/catering.png" class="card-img" alt="Frais Restauration">
			<div class="card-body">
				<div class="card-title">Restaurations</div>
				<a href="{{ path('visiteur_restaurations') }}" class="btn btn-primary">Voir les frais</a>
			</div>
		</div>
	</div>

	<div class="header">Liste des frais</h1>
	{# LISTE DES FRAIS #}

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		function showCategory(category) {
document.getElementById("category-details").style.display = "block";
document.getElementById("category-title").textContent = category.charAt(0).toUpperCase() + category.slice(1);
}

document.getElementById("add-fee-button").onclick = function () {
document.getElementById("add-fee-form").style.display = "block";
};

function addFee(category) {
const feeAmount = document.getElementById("fee-amount").value;

fetch('/visiteur/add-fee', {
method: 'POST',
body: new URLSearchParams(
{'category': category, 'amount': feeAmount}
),
headers: {
'Content-Type': 'application/x-www-form-urlencoded'
}
}).then(response => response.json()).then(data => {
if (data.success) {
alert("Frais ajouté avec succès !");
window.location.reload(); // Rafraîchir la page pour afficher le nouveau frais
} else {
alert("Erreur lors de l'ajout du frais.");
}
});
}
	</script>
{% endblock %}
